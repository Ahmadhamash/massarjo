<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>بروفايل المرشد - مسار</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body style="background: var(--background); color: var(--text-dark);">

  <div class="profile-header-curve">
    <div class="container mx-auto px-6 h-full flex items-start pt-8">
      <a href="index.html" class="back-link">
        <i class="fas fa-arrow-right ml-2"></i> العودة للرئيسية
      </a>
    </div>
  </div>

  <div class="container mx-auto px-4 sm:px-6 relative" style="margin-top: -100px; padding-bottom: 4rem;">
    
    <div class="profile-main-card reveal">
      
      <div class="profile-intro">
        <div class="relative">
          <img id="mentor-avatar" class="profile-avatar" alt="Mentor">
          <div id="status-indicator" class="status-dot" title="متاح"></div>
        </div>
        
        <div class="profile-titles">
          <h1 id="mentor-name" class="text-3xl font-bold mb-2 text-white"></h1>
          <p id="mentor-title" class="text-lg text-indigo-200 font-medium"></p>
        </div>
      </div>

      <div class="profile-divider"></div>

      <div class="profile-grid">
        
        <div class="profile-bio-section">
          <h3 class="section-label">
            <i class="fas fa-quote-right ml-2"></i> نبذة تعريفية
          </h3>
          <p id="mentor-bio" class="bio-text"></p>
        </div>

        <div class="profile-details-section">
          
          <div class="detail-card">
            <div class="detail-icon bg-blue-500/10 text-blue-400">
              <i class="fas fa-briefcase"></i>
            </div>
            <div>
              <span class="detail-label">سنوات الخبرة</span>
              <span id="mentor-exp" class="detail-value"></span>
            </div>
          </div>

          <div class="detail-card">
            <div class="detail-icon bg-purple-500/10 text-purple-400">
              <i class="fas fa-layer-group"></i>
            </div>
            <div>
              <span class="detail-label">التخصص</span>
              <span id="mentor-spec" class="detail-value"></span>
            </div>
          </div>

          <button onclick="bookSessionWithMentor()" class="book-now-btn">
            <span>احجز استشارة الآن</span>
            <i class="fas fa-calendar-check mr-2"></i>
          </button>

        </div>
      </div>

    </div>

  </div>

  <script>
    (function () {
      const stored = localStorage.getItem('selectedMentor');
      if (!stored) {
        window.location.href = 'index.html';
        return;
      }

      const mentorData = JSON.parse(stored);

      // تعبئة البيانات
      document.getElementById('mentor-name').textContent = mentorData.name || 'مرشد مسار';
      document.getElementById('mentor-title').textContent = mentorData.title || 'مستشار مهني';
      
      // التعامل مع النبذة الفارغة
      const bioText = mentorData.bio && mentorData.bio.trim() !== "" 
          ? mentorData.bio 
          : "لم يقم هذا المرشد بإضافة نبذة تعريفية بعد.";
      document.getElementById('mentor-bio').textContent = bioText;

      document.getElementById('mentor-exp').textContent = (mentorData.experience || 'غير محدد') + (mentorData.experience ? ' سنوات' : '');
      document.getElementById('mentor-spec').textContent = mentorData.specialty || 'عام';

      // الصورة
      const avatarEl = document.getElementById('mentor-avatar');
      const avatarUrl = mentorData.avatar && mentorData.avatar.trim()
          ? mentorData.avatar
          : 'https://placehold.co/300x300/e0e7ff/4338ca?text=' + encodeURIComponent(mentorData.name ? mentorData.name.charAt(0) : 'م');
      avatarEl.src = avatarUrl;

      // حالة النشاط (لون النقطة)
      const statusDot = document.getElementById('status-indicator');
      if (mentorData.status === 'active') {
        statusDot.style.backgroundColor = '#10b981'; // أخضر
        statusDot.title = "نشط حالياً";
      } else {
        statusDot.style.backgroundColor = '#9ca3af'; // رمادي
        statusDot.title = "غير نشط";
      }

    })();

    function bookSessionWithMentor() {
        const stored = localStorage.getItem('selectedMentor');
        if (stored) {
             const mentorData = JSON.parse(stored);
             if (typeof selectMentor === 'function') {
                 selectMentor(mentorData._id);
             } else {
                 localStorage.setItem('tempSelectedMentor', stored);
             }
        }
        window.location.href = 'index.html#packages';
    }
  </script>
</body>
</html>