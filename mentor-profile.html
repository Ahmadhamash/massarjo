<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>بروفايل المرشد - مسار</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body style="background: var(--background); color: var(--text-dark);">

  <div class="mentor-cover-bg"></div>

  <div class="container mx-auto px-4 sm:px-6 relative" style="margin-top: -80px;">
    <a href="index.html" class="inline-flex items-center gap-2 mb-6 text-white hover:text-primary-light transition-colors font-bold">
      <i class="fas fa-arrow-right"></i> رجوع للصفحة الرئيسية
    </a>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      
      <div class="lg:col-span-1">
        <div class="mentor-sidebar-card">
          <div class="text-center relative">
            <img id="mentor-avatar" class="mentor-profile-img" alt="Mentor">
            <div class="mentor-status-badge">
              <span class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></span> متاح للاستشارة
            </div>
          </div>
          
          <div class="text-center mt-4">
            <h1 id="mentor-name" class="text-2xl font-bold"></h1>
            <p id="mentor-title" class="text-indigo-400 font-medium mt-1"></p>
            
            <div class="flex items-center justify-center gap-1 mt-3 text-yellow-400 text-sm">
              <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
              <span class="text-slate-400 mr-1">(5.0)</span>
            </div>
          </div>

          <hr class="border-slate-700 my-6">

          <div class="space-y-4 text-sm">
            <div class="flex items-center justify-between">
              <span class="text-slate-400">الخبرة:</span>
              <span id="mentor-exp" class="font-bold text-white"></span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-slate-400">التخصص الدقيق:</span>
              <span id="mentor-spec" class="font-bold text-white"></span>
            </div>
          </div>

          <button onclick="bookSessionWithMentor()" class="w-full mt-8 btn-primary justify-center py-3 text-lg shadow-lg shadow-indigo-500/30">
            احجز جلسة الآن <i class="fas fa-calendar-check mr-2"></i>
          </button>
        </div>
      </div>

      <div class="lg:col-span-2 space-y-6">
        
        <div class="mentor-content-card">
          <h2 class="section-title-sm"><i class="fas fa-user-circle ml-2 text-primary"></i> نبذة عني</h2>
          <p id="mentor-bio" class="text-slate-300 leading-loose text-lg mt-4"></p>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="stat-box">
            <i class="fas fa-users text-2xl text-blue-400 mb-2"></i>
            <div class="text-2xl font-bold">+50</div>
            <div class="text-xs text-slate-400">طالب تم إرشاده</div>
          </div>
          <div class="stat-box">
            <i class="fas fa-clock text-2xl text-green-400 mb-2"></i>
            <div class="text-2xl font-bold">+100</div>
            <div class="text-xs text-slate-400">ساعة استشارية</div>
          </div>
          <div class="stat-box">
            <i class="fas fa-certificate text-2xl text-yellow-400 mb-2"></i>
            <div class="text-2xl font-bold">5</div>
            <div class="text-xs text-slate-400">شهادات معتمدة</div>
          </div>
          <div class="stat-box">
            <i class="fas fa-heart text-2xl text-red-400 mb-2"></i>
            <div class="text-2xl font-bold">100%</div>
            <div class="text-xs text-slate-400">رضا المستفيدين</div>
          </div>
        </div>

        <div class="mentor-content-card">
          <h2 class="section-title-sm"><i class="fas fa-lightbulb ml-2 text-primary"></i> مجالات الخبرة</h2>
          <div class="flex flex-wrap gap-2 mt-4" id="skills-container">
            <span class="skill-tag">الإرشاد المهني</span>
            <span class="skill-tag">تطوير السيرة الذاتية</span>
            <span class="skill-tag">المقابلات الشخصية</span>
            <span class="skill-tag">التخطيط للمستقبل</span>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script>
    let mentorData = null;

    (function () {
      const stored = localStorage.getItem('selectedMentor');
      if (!stored) {
        window.location.href = 'index.html';
        return;
      }

      mentorData = JSON.parse(stored);

      // تعبئة البيانات الأساسية
      document.getElementById('mentor-name').textContent = mentorData.name || 'مرشد مسار';
      document.getElementById('mentor-title').textContent = mentorData.title || 'مستشار مهني';
      document.getElementById('mentor-bio').textContent = mentorData.bio || 'مرحباً بك في ملفي الشخصي. أنا هنا لمساعدتك في تحقيق أهدافك المهنية ورسم خارطة طريق واضحة لمستقبلك.';
      document.getElementById('mentor-exp').textContent = (mentorData.experience || '3') + ' سنوات';
      document.getElementById('mentor-spec').textContent = mentorData.specialty || 'عام';

      // الصورة
      const avatarEl = document.getElementById('mentor-avatar');
      const avatarUrl = mentorData.avatar && mentorData.avatar.trim()
          ? mentorData.avatar
          : 'https://placehold.co/300x300/e0e7ff/4338ca?text=' + encodeURIComponent(mentorData.name ? mentorData.name.charAt(0) : 'م');
      avatarEl.src = avatarUrl;

      // تحديث التخصصات إذا كانت موجودة (اختياري)
      if (mentorData.specialty) {
         const container = document.getElementById('skills-container');
         // إضافة التخصص كـ Tag إضافي
         const tag = document.createElement('span');
         tag.className = 'skill-tag';
         tag.textContent = mentorData.specialty;
         container.prepend(tag);
      }
    })();

    function bookSessionWithMentor() {
        // نستخدم دالة الحجز الموجودة في النظام
        // أولاً: نحفظ المرشد المختار
        if (typeof selectMentor === 'function') {
            // إذا كانت الدالة متاحة عالمياً
             selectMentor(mentorData._id);
        } else {
             // تخزين يدوي إذا لم تكن الدالة متاحة
             localStorage.setItem('tempSelectedMentor', JSON.stringify(mentorData));
        }
        
        // التوجيه لقسم الباقات في الصفحة الرئيسية
        window.location.href = 'index.html#packages';
    }
  </script>
</body>
</html>